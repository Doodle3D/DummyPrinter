
<body>
  <div id="test">connecting...</div>
</body>

<script src="https://code.jquery.com/jquery-git2.min.js"></script>
<script src="node_modules/socket.io-client/socket.io.js"></script>

<script>

var CLOUD_URL = "https://cloud.doodle3d.com";



function register(cb) {
  var url = CLOUD_URL+"/printer/register";
  var name = "BrowserPrinter";
  var features = ["printer","network","debug","update","config","webcam","slicer"];
  var data = { name: name, features: features }

  $.post(url, data, function(data) {
    console.log("post response: ",data,data.id);
    localStorage.setItem("id",data.id);
    localStorage.setItem("key",data.key);
    if (cb) cb(data);
  });
}

if (localStorage.getItem("id")) {
  console.log(localStorage.getItem("id"));
} else {
  register(function(data) {
    $("#test").text("ready, see console for details");
  });
}

</script>